# Implementing CQRS in a new Muon library

Command Query Responsibility Segregation (CQRS) is a pattern that asserts that there are different pressures on actions that are ```Queries``` and actions that are ```Commands```, different pressures when you interrogate a system versus when you update it. http://martinfowler.com/bliki/CQRS.html

Muon takes this concept as a core part of it's design.

Every transport will need to implement these in diffeent ways, but the semantics that appear on top of the transport will be the same.

Your job as a library designer is to understand how these semantics should be presented to the user, and then map those to the underlying transports for moving between services.

At the transport layer, both Commands an Queries look similar, being an event interchange/ request-response.

## Endpoints

Muon defines the concept of an 'endpoint' that is used in all of Commands, Queries and Streams. They can overlay each other, with a specific endpoint being the tuple of path + mechanism (command, query, stream).

## Query

To implement a Query, you should permit a user to specify and endpoint

## Command


## Transport

Each transport will need to map these in different ways. Muon compatibility is enforced at the ```transport``` layer, not at higher levels. So long as you can interoperate at the transport layer, you are done. Different libraries will implement the concepts in different ways and provide more or less advanced features to aid the user. This is a choice you a free to make, so long as compatibility at the transports level is maintained.

link:amqp/CQRS.adoc[Building an AMQP CQRS.adoc]
